<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComfyUI URLè¯·æ±‚æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-image {
            max-width: 100%;
            height: auto;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
        }

        .test-video {
            width: 100%;
            max-width: 600px;
            height: auto;
        }

        .loading {
            display: inline-block;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 4px;
            color: #1976d2;
        }

        .error {
            display: inline-block;
            padding: 10px;
            background: #ffebee;
            border-radius: 4px;
            color: #d32f2f;
        }

        .url-display {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            word-break: break-all;
            margin: 10px 0;
        }

        .dynamic-controls {
            margin: 20px 0;
        }

        .dynamic-controls input, .dynamic-controls select {
            margin: 5px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .dynamic-controls button {
            padding: 8px 16px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .dynamic-controls button:hover {
            background: #1565c0;
        }
    </style>
</head>
<body>
    <h1>ğŸ¨ ComfyUI URLè¯·æ±‚åŠŸèƒ½æµ‹è¯•</h1>

    <div class="test-section">
        <h2>ğŸ“ è¯´æ˜</h2>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•Cherry Studioçš„ComfyUI URLè¯·æ±‚åŠŸèƒ½ã€‚ç¡®ä¿Cherry Studioæ­£åœ¨è¿è¡Œå¹¶ä¸”å·²ç»é…ç½®äº†ç›¸åº”çš„ComfyUIç»„ä»¶ã€‚</p>
        <p><strong>æ³¨æ„</strong>ï¼šè¿™äº›URLåªåœ¨Cherry Studioçš„Electronç¯å¢ƒä¸­æœ‰æ•ˆã€‚</p>
    </div>

    <div class="test-section">
        <h2>ğŸ–¼ï¸ å›¾ç‰‡ç”Ÿæˆæµ‹è¯•</h2>
        <h3>æµ‹è¯•1ï¼šåŸºç¡€æ–‡æœ¬åˆ°å›¾ç‰‡ï¼ˆç®€çŸ­æ ¼å¼ï¼‰</h3>
        <div class="url-display">comfy-text2image?prompt=beautiful%20landscape&steps=20&cfg=7.5</div>
        <img id="test-image-1"
             src="comfy-text2image?prompt=beautiful%20landscape&steps=20&cfg=7.5"
             alt="AIç”Ÿæˆçš„é£æ™¯ç”»"
             class="test-image"
             onload="showSuccess(this)"
             onerror="showError(this)" />

        <h3>æµ‹è¯•2ï¼šverticalPaintingç»„ä»¶ï¼ˆå®Œæ•´æ ¼å¼ï¼‰</h3>
        <div class="url-display">comfyui-verticalPainting?prompt=masterpiece%2C%20best%20quality%2C%20anime%20style%2C%201girl</div>
        <img id="test-image-2"
             src="comfyui-verticalPainting?prompt=masterpiece%2C%20best%20quality%2C%20anime%20style%2C%201girl"
             alt="äºŒæ¬¡å…ƒç«‹ç»˜"
             class="test-image"
             onload="showSuccess(this)"
             onerror="showError(this)" />

        <h3>æµ‹è¯•3ï¼šåŠ¨æ¼«é£æ ¼äººç‰©ï¼ˆç®€çŸ­æ ¼å¼ï¼‰</h3>
        <div class="url-display">comfy-anime-portrait?style=cute&character=girl&mood=happy</div>
        <img id="test-image-3"
             src="comfy-anime-portrait?style=cute&character=girl&mood=happy"
             alt="åŠ¨æ¼«é£æ ¼äººç‰©"
             class="test-image"
             onload="showSuccess(this)"
             onerror="showError(this)" />
    </div>

    <div class="test-section">
        <h2>ğŸ¬ è§†é¢‘ç”Ÿæˆæµ‹è¯•</h2>
        <h3>æµ‹è¯•3ï¼šçŸ­è§†é¢‘ç”Ÿæˆ</h3>
        <div class="url-display">comfy-video-gen?prompt=sunset%20over%20mountains&duration=5&style=cinematic</div>
        <video id="test-video-1"
               src="comfy-video-gen?prompt=sunset%20over%20mountains&duration=5&style=cinematic"
               class="test-video"
               controls
               onloadeddata="showSuccess(this)"
               onerror="showError(this)">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
        </video>
    </div>

    <div class="test-section">
        <h2>ğŸ“ æ–‡å­—ç”Ÿæˆæµ‹è¯•</h2>
        <h3>æµ‹è¯•4ï¼šæ•…äº‹ç”Ÿæˆ</h3>
        <div class="url-display">comfy-story-gen?theme=adventure&length=short&protagonist=wizard</div>
        <iframe id="test-text-1"
                src="comfy-story-gen?theme=adventure&length=short&protagonist=wizard"
                width="100%"
                height="200"
                style="border: 1px solid #ddd; border-radius: 4px;"
                onload="showSuccess(this)"
                onerror="showError(this)">
        </iframe>
    </div>

    <div class="test-section">
        <h2>âš¡ åŠ¨æ€ç”Ÿæˆæµ‹è¯•</h2>
        <div class="dynamic-controls">
            <input type="text" id="dynamic-prompt" placeholder="è¾“å…¥æç¤ºè¯..." value="cute cat playing">
            <select id="dynamic-style">
                <option value="realistic">å†™å®é£æ ¼</option>
                <option value="anime">åŠ¨æ¼«é£æ ¼</option>
                <option value="oil-painting">æ²¹ç”»é£æ ¼</option>
                <option value="watercolor">æ°´å½©é£æ ¼</option>
            </select>
            <input type="number" id="dynamic-steps" placeholder="æ­¥æ•°" value="25" min="10" max="50">
            <button onclick="generateDynamicImage()">ç”Ÿæˆå›¾ç‰‡</button>
        </div>

        <div id="dynamic-url" class="url-display" style="display: none;"></div>
        <img id="dynamic-image" class="test-image" style="display: none;" />
    </div>

    <div class="test-section">
        <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
        <div id="test-results">
            <p>ç­‰å¾…æµ‹è¯•ç»“æœ...</p>
        </div>
    </div>

    <script>
        let testResults = {
            success: 0,
            failed: 0,
            total: 0
        };

        function showSuccess(element) {
            console.log('âœ… æˆåŠŸåŠ è½½:', element.src || element.id);
            testResults.success++;
            updateTestResults();

            // æ·»åŠ æˆåŠŸæ ‡è¯†
            const successDiv = document.createElement('div');
            successDiv.className = 'loading';
            successDiv.textContent = 'âœ… åŠ è½½æˆåŠŸ';
            element.parentNode.insertBefore(successDiv, element.nextSibling);
        }

        function showError(element) {
            console.log('âŒ åŠ è½½å¤±è´¥:', element.src || element.id);
            testResults.failed++;
            updateTestResults();

            // æ·»åŠ é”™è¯¯æ ‡è¯†
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = 'âŒ åŠ è½½å¤±è´¥ - è¯·æ£€æŸ¥ç»„ä»¶é…ç½®';
            element.parentNode.insertBefore(errorDiv, element.nextSibling);
        }

        function updateTestResults() {
            testResults.total = testResults.success + testResults.failed;
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = `
                <p><strong>æµ‹è¯•ç»Ÿè®¡ï¼š</strong></p>
                <p>âœ… æˆåŠŸï¼š${testResults.success}</p>
                <p>âŒ å¤±è´¥ï¼š${testResults.failed}</p>
                <p>ğŸ“Š æ€»è®¡ï¼š${testResults.total}</p>
                <p>æˆåŠŸç‡ï¼š${testResults.total > 0 ? Math.round(testResults.success / testResults.total * 100) : 0}%</p>
            `;
        }

        function generateDynamicImage() {
            const prompt = document.getElementById('dynamic-prompt').value;
            const style = document.getElementById('dynamic-style').value;
            const steps = document.getElementById('dynamic-steps').value;

            if (!prompt.trim()) {
                alert('è¯·è¾“å…¥æç¤ºè¯');
                return;
            }

            const params = new URLSearchParams({
                prompt: prompt,
                style: style,
                steps: steps,
                cfg: '7.5'
            });

            const url = `comfy-dynamic-gen?${params.toString()}`;

            // æ˜¾ç¤ºURL
            const urlDiv = document.getElementById('dynamic-url');
            urlDiv.textContent = url;
            urlDiv.style.display = 'block';

            // è®¾ç½®å›¾ç‰‡
            const img = document.getElementById('dynamic-image');
            img.src = url;
            img.style.display = 'block';
            img.onload = () => showSuccess(img);
            img.onerror = () => showError(img);
        }

        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹æµ‹è¯•
        window.onload = function() {
            console.log('ğŸš€ å¼€å§‹ComfyUI URLè¯·æ±‚æµ‹è¯•...');
            updateTestResults();
        };
    </script>
</body>
</html>
